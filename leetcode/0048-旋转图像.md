# 48. æ—‹è½¬å›¾åƒ
[åŸé¢˜é“¾æ¥ğŸ”—](https://leetcode-cn.com/problems/rotate-image/)

ç»™å®šä¸€ä¸ª `n Ã— n` çš„äºŒç»´çŸ©é˜µ `matrix` è¡¨ç¤ºä¸€ä¸ªå›¾åƒã€‚è¯·ä½ å°†å›¾åƒé¡ºæ—¶é’ˆæ—‹è½¬ `90` åº¦ã€‚

ä½ å¿…é¡»åœ¨ **åŸåœ°** æ—‹è½¬å›¾åƒï¼Œè¿™æ„å‘³ç€ä½ éœ€è¦ç›´æ¥ä¿®æ”¹è¾“å…¥çš„äºŒç»´çŸ©é˜µã€‚è¯·ä¸è¦ä½¿ç”¨å¦ä¸€ä¸ªçŸ©é˜µæ¥æ—‹è½¬å›¾åƒã€‚

## è§£é¢˜æ€è·¯
æ•°å­¦é¢˜ï¼Œåæ ‡å˜æ¢é—®é¢˜ã€‚åæ ‡å˜æ¢åˆ†æå¦‚ä¸‹ï¼š

ä»¥åæ ‡ `(0, 0)` ä¸ºä¸­å¿ƒé¡ºæ—¶é’ˆæ—‹è½¬90Â°å¾—åˆ°åæ ‡å˜æ¢å…¬å¼ä¸ºï¼š

$$
\begin{cases} x' = y \\ y' = -x \end{cases}
$$

ä»¥åæ ‡ `(a, b)` ä¸ºä¸­å¿ƒçš„é¡ºæ—¶é’ˆæ—‹è½¬å¯è§†ä¸ºä¸Šä¸€æ­¥éª¤æ—‹è½¬åçš„åæ ‡ç³»å¹³ç§»ï¼š

$$
\begin{cases} x' = y \\ y' = -x \end{cases}
\to å¹³ç§» \to
\begin{cases} (x' - a) = (y - b) \\ (y' - b) = -(x - a) \end{cases}
$$

æ­¤é¢˜ä¸­çš„æ—‹è½¬ä¸­å¿ƒä¸º `((n - 1)/2, (n - 1)/2)` ï¼Œå…¶ä¸­nä¸ºå…ƒç´ ä¸ªæ•°ï¼Œæ•…å¾—åˆ°åæ ‡å˜æ¢å…¬å¼ï¼š

$$
\begin{cases} (x' - (n - 1)/2) = (y - (n - 1)/2) \\ (y' - (n - 1)/2) = -(x - (n - 1)/2) \end{cases}
\to
\begin{cases} x' = y \\ y' = n - 1 - x \end{cases}
$$

è‡³æ­¤ï¼Œæ­¤é¢˜è½¬åŒ–ä¸ºå¦‚ä½•éå†æ•°ç»„è¿›è¡Œä»¥ä¸Šå˜æ¢çš„é—®é¢˜ï¼Œä¸»è¦æ€è·¯æœ‰ä¸¤ç§ï¼šåŒºåŸŸåˆ†å‰²å’Œåˆ†æ­¥åæ ‡å˜æ¢ã€‚

æ­¤å¤„ä½¿ç”¨åˆ†æ­¥åæ ‡å˜æ¢ä¸ºä¾‹ï¼Œå…ˆè¿›è¡Œxåæ ‡ä¸yåæ ‡äº¤æ¢ï¼Œå†æ²¿çŸ©é˜µä¸­å¿ƒä½œyåæ ‡å¯¹ç§°å˜æ¢å³å¯ï¼š

$$
(x, y)
\to
\begin{cases} x' = y \\ y' = x \end{cases}
\to
\begin{cases} x'' = x' = y \\ y'' = n - 1 - y' = n - 1 - x \end{cases}
$$

## ä»£ç å®ç°

**JavaScriptï¼š**
```js
/**
 * @param {number[][]} matrix
 * @return {void} Do not return anything, modify matrix in-place instead.
 */
var rotate = function(matrix) {
  let n = matrix.length - 1
  // äº¤æ¢xyåæ ‡
  for(let i = 0; i <= n; i++) {
    for(let j = i + 1; j <= n; j++) {
      matrix[i][j] ^= matrix[j][i]
      matrix[j][i] ^= matrix[i][j]
      matrix[i][j] ^= matrix[j][i]
    }
  }
  // å‚ç›´å¯¹ç§°
  for(let i = 0; i <= n; i++) {
    for(let j = 0; j < n / 2; j++) {
      matrix[i][j] ^= matrix[i][n - j]
      matrix[i][n - j] ^= matrix[i][j]
      matrix[i][j] ^= matrix[i][n - j]
    }
  }
};
```
