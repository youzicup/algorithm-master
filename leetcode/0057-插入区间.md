# 57. æ’å…¥åŒºé—´
[åŸé¢˜é“¾æ¥ğŸ”—](https://leetcode-cn.com/problems/insert-interval/)

ç»™ä½ ä¸€ä¸ª **æ— é‡å çš„** ï¼ŒæŒ‰ç…§åŒºé—´èµ·å§‹ç«¯ç‚¹æ’åºçš„åŒºé—´åˆ—è¡¨ã€‚

åœ¨åˆ—è¡¨ä¸­æ’å…¥ä¸€ä¸ªæ–°çš„åŒºé—´ï¼Œä½ éœ€è¦ç¡®ä¿åˆ—è¡¨ä¸­çš„åŒºé—´ä»ç„¶æœ‰åºä¸”ä¸é‡å ï¼ˆå¦‚æœæœ‰å¿…è¦çš„è¯ï¼Œå¯ä»¥åˆå¹¶åŒºé—´ï¼‰ã€‚

å¦‚ è¾“å…¥ï¼š`intervals = [[1,3],[6,9]], newInterval = [2,5]`

  è¾“å‡ºï¼š`[[1,5],[6,9]]`

## è§£é¢˜æ€è·¯
æœ¬é¢˜ç»™å‡ºçš„åŸæ•°ç»„å®é™…ä¸Šæä¾›äº†å¤šæ®µæœ‰æ•ˆåŒºé—´ï¼Œæ’å…¥åŒºé—´çš„æ“ä½œå¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ æ­¥ï¼š

 - æ‰¾åˆ°æ–°åŒºé—´çš„èµ·å§‹ç‚¹ `left` å’Œç»ˆæ­¢ç‚¹ `right` æ‰€å¤„çš„ä½ç½®ï¼Œå¹¶åˆ¤æ–­è¯¥ä½ç½®å¤„äºæœ‰æ•ˆåŒºåŸŸè¿˜æ˜¯æ— æ•ˆåŒºåŸŸ

 - å°†æœ‰æ•ˆåŒºåŸŸæŒ‰ç…§ä»¥ä¸Šä¸¤ç‚¹ä½ç½®åˆ’åˆ†ä¸ºä¸‰ç±»ï¼š1.ä¸¤ç‚¹ä¹‹å¤–ï¼›2.ä¸¤ç‚¹ä¹‹é—´ï¼›3.åŒ…å«ä¸¤ç‚¹

 - ä¸¤ç‚¹ä¹‹å¤–çš„æœ‰æ•ˆåŒºåŸŸä¿ç•™ï¼Œä¸¤ç‚¹ä¹‹é—´ä¸”ä¸å«ä¸¤ç‚¹çš„åŒºåŸŸèˆå¼ƒï¼ŒåŒ…å«ä¸¤ç‚¹çš„åŒºåŸŸå–å…¶ **å·¦è¾¹ç•Œ** æˆ– **å³è¾¹ç•Œ** ä½œä¸ºæ–°åŒºåŸŸè¾¹ç•Œï¼Œå¹¶å°†æ–°åŒºåŸŸä¿å­˜

ä»¥ä¸Šæ€è·¯å…ˆè·å–ä¸¤ç‚¹åæ ‡ï¼Œå†å¯¹åŒºé—´åˆ†ç±»ï¼Œå®é™…ä¸Šè¿™ä¸¤æ­¥å¯ä»¥åˆå¹¶ï¼Œå¾—åˆ°ä¼˜åŒ–è§£æ³•ï¼š

 - ä¾æ¬¡åˆ¤æ–­åŒºé—´å³è¾¹ç•Œæ˜¯å¦å°äºæ–°åŒºé—´èµ·å§‹ç‚¹ `left`ï¼Œæ˜¯åˆ™ç›´æ¥ä¿ç•™ï¼Œå¦åˆ™è¿›å…¥ä¸‹ä¸€æ­¥

 - æ„å»ºåˆå¹¶åŒºé—´ï¼Œå·¦è¾¹ç•Œä¸ºåŒ…å« `left` çš„åŒºé—´å·¦è¾¹ç•Œï¼Œéšåä¾æ¬¡åˆ¤æ–­åŒºé—´å·¦è¾¹ç•Œæ˜¯å¦ä¸å¤§äº `right`ï¼Œæ˜¯åˆ™ç›´æ¥èˆå¼ƒï¼Œå¦åˆ™å–å³è¾¹ç•Œä½œä¸ºåˆå¹¶åŒºé—´å³è¾¹ç•Œ

 - è‹¥ä¸Šä¸€æ­¥ä¸­éå†ç»“æŸä»æœªå‡ºç°åŒ…å« `right` çš„åŒºé—´ï¼Œåˆ™å³åŒºé—´ä¸º `right`

 - å°†å‰©ä½™åŒºé—´å…¨éƒ¨ä¿ç•™

#### å¤æ‚åº¦åˆ†æ
 - æ—¶é—´å¤æ‚åº¦ $O(n)$ ã€‚
 - ç©ºé—´å¤æ‚åº¦ $O(n)$ ã€‚

## ä»£ç å®ç°

**JavaScriptï¼š**

ä¼˜åŒ–å‰ï¼š
```js
/**
 * @param {number[][]} intervals
 * @param {number[]} newInterval
 * @return {number[][]}
 */
var insert = function(intervals, newInterval) {
  let [leftIndex, leftNeedMerge] = searchIndex(intervals, newInterval[0])
  let [rightIndex, rightNeedMerge] = searchIndex(intervals, newInterval[1])
  let res = [], mergedArea = []
  if(leftNeedMerge) {
    intervals[leftIndex]
    mergedArea.push(intervals[leftIndex][0])
  } else {
    mergedArea.push(newInterval[0])
  }
  if(rightNeedMerge) {
    mergedArea.push(intervals[rightIndex][1])
  } else {
    mergedArea.push(newInterval[1])
  }
  for(let i = 0; i < intervals.length; i++) {
    if(i < leftIndex || i > rightIndex) {
      res.push(intervals[i])
    } else if(i === rightIndex) {
      res.push(mergedArea)
      if(!rightNeedMerge) {
        res.push(intervals[i])
      }
    }
  }
  if(rightIndex === intervals.length) {
    res.push(mergedArea)
  }
  return res
};

/** æŸ¥æ‰¾åº”å½“æ’å…¥ä½ç½®åŠæ˜¯å¦éœ€è¦åˆå¹¶ */
function searchIndex(intervals, num){
  let needToMerge = false
  for(var i = 0; i < intervals.length; i++) {
    if(num < intervals[i][0]) {
      break
    } else if(num <= intervals[i][1]) {
      needToMerge = true
      break
    }
  }
  return [i, needToMerge]
}
```

ä¼˜åŒ–åï¼š
```js
/**
 * @param {number[][]} intervals
 * @param {number[]} newInterval
 * @return {number[][]}
 */
var insert = function(intervals, newInterval) {
  let res = [], index = 0
  // æ–°åŒºåŸŸå‰
  while(index < intervals.length && intervals[index][1] < newInterval[0]) {
    res.push(intervals[index++])
  }
  // åˆå¹¶æ–°åŒºåŸŸ
  while(index < intervals.length && intervals[index][0] <= newInterval[1]) {
    newInterval[0] = Math.min(newInterval[0], intervals[index][0])
    newInterval[1] = Math.max(newInterval[1], intervals[index][1])
    index++
  }
  res.push(newInterval)
  // æ–°åŒºåŸŸä¹‹å
  while(index < intervals.length) {
    res.push(intervals[index++])
  }
  return res
};
```
