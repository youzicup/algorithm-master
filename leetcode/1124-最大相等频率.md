# 1224. æœ€å¤§ç›¸ç­‰é¢‘ç‡
[åŸé¢˜é“¾æ¥ğŸ”—](https://leetcode.cn/problems/maximum-equal-frequency/)

ç»™ä½ ä¸€ä¸ªæ­£æ•´æ•°æ•°ç»„Â `nums`ï¼Œè¯·ä½ å¸®å¿™ä»è¯¥æ•°ç»„ä¸­æ‰¾å‡ºèƒ½æ»¡è¶³ä¸‹é¢è¦æ±‚çš„ `æœ€é•¿` å‰ç¼€ï¼Œå¹¶è¿”å›è¯¥å‰ç¼€çš„é•¿åº¦ï¼š

 - ä» **å‰ç¼€** ä¸­ `åˆ é™¤ä¸€ä¸ª` å…ƒç´ åï¼Œå‰©ä¸‹æ¯ä¸ªæ•°å­—çš„å‡ºç°æ¬¡æ•°éƒ½ç›¸åŒã€‚

å¦‚æœåˆ é™¤è¿™ä¸ªå…ƒç´ åæ²¡æœ‰å‰©ä½™å…ƒç´ å­˜åœ¨ï¼Œä»å¯è®¤ä¸ºæ¯ä¸ªæ•°å­—éƒ½å…·æœ‰ç›¸åŒçš„å‡ºç°æ¬¡æ•°ï¼ˆä¹Ÿå°±æ˜¯ `0` æ¬¡ï¼‰ã€‚

## è§£é¢˜æ€è·¯
æ³¨æ„ï¼šé¢˜ç›®ä¸­è¦æ±‚çš„æ˜¯ `å‰ç¼€` åºåˆ—ã€‚

å¯¹å‰ç¼€çš„ä¸åŒæƒ…å†µè¿›è¡Œåˆ†æï¼Œè®¾åˆ é™¤çš„å…ƒç´ åœ¨å‰ç¼€ä¸­å‡ºç°çš„æ¬¡æ•°ä¸º `f`ï¼Œæœ€å¤§é¢‘ç‡ä¸º `maxFreq` åˆ™å¯åˆ†ä¸ºä»¥ä¸‹ä¸‰ç§æƒ…å†µï¼š

1. `f == 1 && maxFreq == 1` æ­¤æ—¶æœ€å¤§å‡ºç°æ¬¡æ•°ä¸º1ã€‚

2. `f == 1 && maxFreq > 1` åˆ™å…¶ä½™æ‰€æœ‰å…ƒç´ å‡ºç°ç‰Œé¢‘ç‡å‡ä¸º `maxFreq` å‰ç¼€é•¿åº¦ç”±ä»¥ä¸‹å…¬å¼ç»™å‡ºï¼š
$$ Lens = maxFreq * count(maxFreq) + 1 $$

3. `f == maxFreq` æ­¤æ—¶åˆ é™¤ç›®æ ‡å…ƒç´ åï¼Œå‰©ä½™å…ƒç´ çš„å‡ºç°æ¬¡æ•°å‡ä¸º `maxFreq - 1`ï¼Œå‰ç¼€é•¿åº¦ç”±ä»¥ä¸‹å…¬å¼ç»™å‡ºï¼š
$$ Lens = (maxFreq - 1) * count(maxFreq) + count(f) $$

é‡‡ç”¨ä¸€ä¸ª `freq` è¡¨æ¥è®°å½•æ¯ä¸ªæ•°å‡ºç°çš„æ¬¡æ•°ï¼Œ `count` è¡¨æ¥è®°å½•å‡ºç° k æ¬¡çš„å…ƒç´ æ€»å…±æœ‰å¤šå°‘ä¸ªï¼›è€Œå‰ç¼€é•¿åº¦ç”±å¾ªç¯ä¸‹æ ‡ç»™å‡ºï¼Œå°è¯æ˜¯å¦ç¬¦åˆä»¥ä¸Šæ¡ä»¶å³å¯ã€‚

## ä»£ç å®ç°

**C++ï¼š**

åˆ©ç”¨stringæ¨¡æ‹Ÿæ ˆï¼Œä¼˜åŒ–ç©ºé—´ï¼š
```C++
class Solution {
public:
  int maxEqualFreq(vector<int>& nums) {
    if(nums.size() <= 3) return nums.size();
    int res = 0, maxFreq = 0, cur;
    int count[100010], freq[100010];
    memset(count, 0, 100010); memset(freq, 0, 100010);
    for(int i = 0; i < nums.size(); i++) {
      cur = nums[i];
      if(freq[cur] > 0) {
        count[freq[cur]]--;
      }
      freq[cur]++; // å¯¹åº”æ•°å­—å‡ºç°æ¬¡æ•°+1
      count[freq[cur]]++; // å¯¹åº”é¢‘ç‡æ€»æ•°å­—ä¸ªæ•°+1
      maxFreq = maxFreq > freq[cur] ? maxFreq : freq[cur];
      if(maxFreq == 1) {
        res = i + 1;
      } else if(maxFreq * count[maxFreq] == i) {
        res = i + 1;
      } else if((maxFreq - 1) * (count[maxFreq - 1] + 1) == i) {
        res = i + 1;
      }
    }
    return res;
  }
};
```
