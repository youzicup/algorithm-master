# 33. æœç´¢æ—‹è½¬æ’åºæ•°ç»„
[åŸé¢˜é“¾æ¥ğŸ”—](https://leetcode-cn.com/problems/search-in-rotated-sorted-array/)  

æ•´æ•°æ•°ç»„ `nums` æŒ‰å‡åºæ’åˆ—ï¼Œæ•°ç»„ä¸­çš„å€¼äº’ä¸ç›¸åŒ ã€‚

åœ¨ä¼ é€’ç»™å‡½æ•°ä¹‹å‰ï¼Œæ•°ç»„åœ¨é¢„å…ˆæœªçŸ¥çš„æŸä¸ªä¸‹æ ‡ `k (0 <= k < nums.length)` ä¸Šè¿›è¡Œäº†æ—‹è½¬ï¼Œä½¿æ•°ç»„å˜ä¸º **[nums[k], nums[k+1], ..., nums[n-1], nums[0], nums[1], ..., nums[k-1]]**ï¼ˆä¸‹æ ‡ ä» 0 å¼€å§‹ è®¡æ•°ï¼‰ã€‚

ä¾‹å¦‚ï¼Œ `[0,1,2,4,5,6,7]` åœ¨ä¸‹æ ‡ 3 å¤„ç»æ—‹è½¬åå¯èƒ½å˜ä¸ºÂ `[4,5,6,7,0,1,2]` ã€‚

ç»™ä½ æ—‹è½¬åçš„æ•°ç»„ `nums` å’Œä¸€ä¸ªæ•´æ•° `target` ï¼Œå¦‚æœ `nums` ä¸­å­˜åœ¨è¿™ä¸ªç›®æ ‡å€¼ `target` ï¼Œåˆ™è¿”å›å®ƒçš„ä¸‹æ ‡ï¼Œå¦åˆ™è¿”å›Â -1Â ã€‚

## è§£é¢˜æ€è·¯
### äºŒåˆ†æŸ¥æ‰¾

æ­¤é¢˜ä¾æ—§æ˜¯äºŒåˆ†æŸ¥æ‰¾çš„å˜å½¢ï¼Œç•¥å¾®å˜åŠ¨äº†æŸ¥æ‰¾çš„æ•°ç»„ã€‚è®¾æ•°ç»„å…ƒç´ å€¼ä¸ä¸‹æ ‡æ„æˆå‡½æ•°: 

$$val = f(index)$$

åˆ™è¯¥å‡½æ•°åœ¨ä»¥æŸä¸‹æ ‡ä¸ºåˆ†éš”çš„å·¦å³ä¸¤ä¸ªåŒºé—´ä¸Šåˆ†åˆ«å•è°ƒé€’å¢ã€‚å› æ­¤å¯ä»¥å…ˆå¯¹ `mid` å…ƒç´ å€¼è¿›è¡Œåˆ¤æ–­ï¼Œæ‰¾åˆ°ä¸€ä¸ªå•è°ƒåŒºé—´ï¼Œå†æ ¹æ® `target` æ˜¯å¦å­˜åœ¨äºè¯¥åŒºé—´è¿›è¡Œè¾¹ç•Œè¿­ä»£ã€‚

å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š

 - $mid = (left + right) / 2$ ï¼Œå¾—åˆ° `mid` åè¿›è¡Œä»¥ä¸‹åˆ¤æ–­ï¼š

   - `nums[mid] == target` => è¿”å› `mid` ä½œä¸ºç­”æ¡ˆã€‚

   - `nums[mid] >= nums[left]` => åŒºé—´ **[left, mid]** å•è°ƒé€’å¢ï¼Œåˆ¤æ–­ç›®æ ‡å€¼æ˜¯å¦åœ¨è¯¥åŒºé—´å†…ï¼Œæ˜¯åˆ™æ›´æ–°rightï¼Œå¦åˆ™æ›´æ–°leftã€‚

   - `nums[mid] < nums[left]` => åŒºé—´ **[mid, right]** å•è°ƒé€’å¢ï¼Œåˆ¤æ–­ç›®æ ‡å€¼æ˜¯å¦åœ¨è¯¥åŒºé—´å†…ï¼Œæ˜¯åˆ™æ›´æ–°leftï¼Œå¦åˆ™æ›´æ–°rightã€‚

## ä»£ç å®ç°
**JavaScriptï¼š**

```javascript
/**
 * @param {number[]} nums
 * @param {number} target
 * @return {number}
 */
var search = function(nums, target) {
  // let res = nums.indexOf(target)
  let left = 0, right = nums.length - 1;
  let res = -1;
  while(left <= right) {
    let mid = Math.floor((left + right) / 2);
    if(nums[mid] === target) {
      res = mid;
      break;
    }
    if(nums[mid] >= nums[left]) {
      if(target >= nums[left] && target < nums[mid]) {
        right = mid - 1;
      } else {
        left = mid + 1;
      }
    } else {
      if(target > nums[mid] && target <= nums[right]) {
        left = mid + 1;
      } else {
        right = mid - 1;
      }
    }
  }
  return res;
};
```

**Goï¼š**
```go
func search(nums []int, target int) int {
    left, right := 0, len(nums) - 1
    for left <= right {
        mid := (left + right) / 2
        if (nums[mid] == target) {
            return mid
        }
        if nums[mid] >= nums[left] {
            if nums[mid] > target && nums[left] <= target {
                right = mid - 1
            } else {
                left = mid + 1
            }
        } else {
            if nums[mid] < target && nums[right] >= target {
                left = mid + 1
            } else {
                right = mid - 1
            }
        }
    }
    return -1
}
```