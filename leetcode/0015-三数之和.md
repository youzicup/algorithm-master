# 15. ä¸‰æ•°ä¹‹å’Œ
[åŸé¢˜é“¾æ¥ğŸ”—](https://leetcode-cn.com/problems/3sum/)  

ç»™ä½ ä¸€ä¸ªåŒ…å«nä¸ªæ•´æ•°çš„æ•°ç»„Â `nums`ï¼Œåˆ¤æ–­Â `nums`Â ä¸­æ˜¯å¦å­˜åœ¨ä¸‰ä¸ªå…ƒç´  `aï¼Œbï¼Œc` ï¼Œä½¿å¾—Â `a + b + c = 0`ã€‚

è¯·ä½ æ‰¾å‡ºæ‰€æœ‰å’Œä¸º **0** ä¸”ä¸é‡å¤çš„ä¸‰å…ƒç»„ã€‚æ³¨æ„ï¼šç­”æ¡ˆä¸­ä¸å¯ä»¥åŒ…å«é‡å¤çš„ä¸‰å…ƒç»„ã€‚

## è§£é¢˜æ€è·¯
### è§£ä¸€ï¼šæš´åŠ›æ±‚è§£
æ­¤é¢˜æœ€å¸¸è§„çš„æ€è·¯æ˜¯ä½¿ç”¨ä¸‰å±‚forå¾ªç¯ï¼Œéå†æ‰€æœ‰ç»„åˆï¼Œæ‰¾å‡ºç¬¦åˆæ¡ä»¶ `a + b + c = 0` çš„ä¸‰ä¸ªå…ƒç´ ã€‚

ä¸ºäº†å¯¹ç»„åˆè¿›è¡Œå»é‡ï¼Œæˆ‘ä»¬å…ˆå°†æ•°ç»„è¿›è¡Œæ’åºï¼Œåœ¨ä¸‰å±‚å¾ªç¯ä¸­å„è‡ªåŠ å…¥ä¸€å±‚è¿­ä»£é€»è¾‘ï¼š

è‹¥æœ¬æ¬¡è¿­ä»£å…ƒç´ ä¸ä¸Šä¸€å¾ªç¯ç›¸ç­‰ï¼Œåˆ™å‘åæ¨è¿›ï¼Œå³ï¼š

 - `if(nums[i] == nums[i - 1]) break;`
 - `if(nums[j] == nums[j - 1]) break;`
 - `if(nums[k] == nums[k - 1]) break;`

#### å¤æ‚åº¦åˆ†æ
 - æ—¶é—´å¤æ‚åº¦ $O(n^3)$ ã€‚
 - ç©ºé—´å¤æ‚åº¦ $O(logn)$ ã€‚æ­¤å¤„å¿½ç•¥äº†è¿”å›ç»“æœçš„å¤§å°ï¼Œç®—æ³•é¢å¤–ç©ºé—´ä¸ºæ’åºæ‰€éœ€çš„æ ˆç©ºé—´å¤§å°ã€‚

### è§£äºŒï¼šéå†å“ˆå¸Œ
åœ¨ä¸‰å±‚å¾ªç¯çš„åŸºç¡€ä¸Šä¼˜åŒ–ï¼Œåˆå¹¶ç¬¬äºŒã€ä¸‰å±‚å¾ªç¯ä¸ºä¸€å±‚ã€‚ä¼˜åŒ–æ–¹æ³•æœ‰**å»ºç«‹å“ˆå¸Œè¡¨**å’Œ**åŒæŒ‡é’ˆ**ä¸¤ç§åšæ³•ã€‚è§£äºŒåˆ†æå“ˆå¸Œè¡¨è§£æ³•ã€‚

ç¬¬äºŒã€ä¸‰å±‚å¾ªç¯å®é™…ä¸Šè¦æ‰¾åˆ°æ»¡è¶³ `b + c = -a` è¿™ä¸€æ¡ä»¶çš„ä¸¤ä¸ªæ•°ï¼Œè€Œ `-a` å·²çŸ¥ï¼Œå¯ä»¥ä½œä¸ºè¯¥å±‚ç›®æ ‡å˜é‡ `target`ã€‚

é‚£ä¹ˆå¯¹äºç¬¬äºŒå±‚å¾ªç¯ä¸­çš„æ¯ä¸€å…ƒç´ ï¼Œå¯ä»¥å»ºç«‹ `b = target - c` çš„å…³ç³»ã€‚åˆ™åœ¨éå†è¿‡ç¨‹ä¸­å¯å°†nums[j]æ‰€éœ€çš„target - nums[j]ä¿å­˜ä¸ºå“ˆå¸Œè¡¨é”®ï¼Œnums[j]ä¸ºå“ˆå¸Œå€¼ã€‚

éšåçš„å…ƒç´ è‹¥å­˜åœ¨äºå“ˆå¸Œè¡¨é”®ä¸­ï¼Œåˆ™ `nums[j] + hashMap[nums[j]] = -a` ï¼Œè¯¥ç»„å…ƒç´ å³ä¸ºä¸€ç»„è§£ã€‚

ä½†ä½¿ç”¨å“ˆå¸Œè¡¨ä¼˜åŒ–åä¼šå‡ºç°éš¾ä»¥å»é‡çš„é—®é¢˜ï¼Œå¦‚ `[0,0,0,0,0]` å’Œ `[-1,0,0,0,1,1,1]`ã€‚

ä¸»è¦æ˜¯å¤±å»ç¬¬ä¸‰å±‚å¾ªç¯åï¼ŒåŸç¬¬äºŒã€ä¸‰å±‚çš„å»é‡å‡æ— æ³•å®ç°ã€‚æœ¬è§£æ³•ä¸ºè§£å†³è¯¥é—®é¢˜ï¼Œå°†å“ˆå¸Œå€¼æ”¹ä¸ºå¯¹è±¡ç±»å‹ï¼Œå­˜å…¥ä¸€ä¸ªæ ‡å¿—è¡¨ç¤ºè¯¥ç»„åˆæ˜¯å¦å·²ç»æ³¨å…¥åˆ°è¾“å‡ºä¸­ï¼Œå³ï¼š

```javascript
{target - nums[j]: {num: nums[j], injected: false}}
```

#### å¤æ‚åº¦åˆ†æ
 - æ—¶é—´å¤æ‚åº¦ $O(n^2)$ ã€‚
 - ç©ºé—´å¤æ‚åº¦ $O(logn + m)$ ã€‚æ­¤å¤„å¿½ç•¥äº†è¿”å›ç»“æœçš„å¤§å°ï¼Œ`logn`ä¸ºæ’åºæ‰€éœ€çš„æ ˆç©ºé—´å¤§å°ï¼Œ`m` ä¸ºè¾“å…¥é•¿åº¦ï¼Œç”¨äºå¼€è¾Ÿå“ˆå¸Œè¡¨ç©ºé—´ã€‚

### è§£ä¸‰ï¼šéå†åŒæŒ‡é’ˆ
è§£æ³•äºŒä¸­ç”±äºä½¿ç”¨äº†å“ˆå¸Œè¡¨è¿›è¡ŒæŸ¥è¯¢ï¼Œé¢å¤–ä½¿ç”¨äº†ç©ºé—´ï¼Œä¹Ÿä½¿å¾—æ•°æ®é‡è¾ƒå¤§æ—¶æ“ä½œè€—æ—¶é•¿ï¼Œæ•…æ”¹ç”¨åŒæŒ‡é’ˆæ³•ã€‚

åœ¨æ¯ä¸€æ¬¡ç¬¬ä¸€å±‚å¾ªç¯ä¸­ï¼ŒåŒæŒ‡é’ˆåˆ†åˆ«åˆå§‹åŒ–ä¸º `left = i + 1` å’Œ `right = len(nums) - 1` ã€‚æ±‚å’Œï¼š

$$sum = nums[i] + nums[left] + nums[right]$$

 - è‹¥ `sum == 0` åˆ™ä¿å­˜ç»„åˆ
 - è‹¥ `sum > 0` åˆ™éœ€å‡å°ï¼Œ`right--`
 - è‹¥ `sum < 0` åˆ™éœ€å‡å°ï¼Œ`left++`

å»é‡ç­–ç•¥ï¼š

 - è‹¥ `nums[left] == nums[left - 1]` åˆ™ `left++`
 - è‹¥ `nums[right] == nums[right + 1]` åˆ™ `right--`

 ç›¸æ¯”èµ·è§£æ³•äºŒï¼ŒåŒæŒ‡é’ˆè§£æ³•åœ¨å¤§é‡æ•°æ®æƒ…å†µä¸‹ï¼Œæ—¶é—´æ€§èƒ½é¢†å…ˆä¸€ä¸ªæ•°é‡çº§ï¼šjs â€”â€” 132ms : 1520ms  go â€”â€” 336ms : 28ms
 å†…å­˜æ¶ˆè€—é™ä½25%ã€‚

 #### å¤æ‚åº¦åˆ†æ
 - æ—¶é—´å¤æ‚åº¦ $O(n^2)$ ã€‚
 - ç©ºé—´å¤æ‚åº¦ $O(logn)$ ã€‚

## ä»£ç å®ç°
**JavaScriptï¼š**

è§£æ³•äºŒï¼š
```javascript
/**
 * @param {number[]} nums
 * @return {number[][]}
 */
var threeSum = function(nums) {
  let res = []
  nums.sort()
  for(let i = 0; i < nums.length - 2; i++) {
    let hashMap = {}
    if(nums[i] > 0) {
      break;
    }
    if(i > 0 && nums[i] === nums[i - 1]) {
      continue;
    }
    for(let j = i + 1; j < nums.length; j++) {
      if(hashMap[nums[j]] === undefined) {
        hashMap[0 - (nums[i] + nums[j])] = {num: nums[j], injected: false}
      } else if(!hashMap[nums[j]].injected) {
        arr = [nums[i], hashMap[nums[j]].num, nums[j]]
        hashMap[nums[j]].injected = true
        res.push(arr)
      }
    }
  }
  return res
};
```

è§£æ³•ä¸‰ï¼š
```javascript
/**
 * @param {number[]} nums
 * @return {number[][]}
 */
var threeSum = function(nums) {
  let ans = [];
  const len = nums.length;
  if(nums == null || len < 3) return ans;
  nums.sort((a, b) => a - b); // æ’åº
  for (let i = 0; i < len ; i++) {
    if(nums[i] > 0) break; // å¦‚æœå½“å‰æ•°å­—å¤§äº0ï¼Œåˆ™ä¸‰æ•°ä¹‹å’Œä¸€å®šå¤§äº0ï¼Œæ‰€ä»¥ç»“æŸå¾ªç¯
    if(i > 0 && nums[i] === nums[i-1]) continue; // å»é‡
    let L = i+1;
    let R = len-1;
    while(L < R) {
      const sum = nums[i] + nums[L] + nums[R];
      if(sum === 0){
        ans.push([nums[i],nums[L],nums[R]]);
        while (L<R && nums[L] === nums[L+1]) L++; // å»é‡
        while (L<R && nums[R] === nums[R-1]) R--; // å»é‡
        L++;
        R--;
      }
      else if(sum < 0) L++;
      else if(sum > 0) R--;
    }
  }        
  return ans;
};
```

**Goï¼š**

è§£æ³•äºŒï¼š
```go
func threeSum(nums []int) [][]int {
    type hashVal struct {
        num 	int
        injected	bool
    }
    res := make([][]int, 0)
    sort.Ints(nums)
    for i := 0; i < len(nums) - 2; i++ {
        hashMap := map[int]hashVal {}
        if nums[i] > 0 {
            break
        }
        if i > 0 && nums[i] == nums[i - 1] {
            continue
        }
        for j := i + 1; j < len(nums); j++ {
            if _, ok := hashMap[nums[j]]; !ok {
                hashMap[0 - (nums[i] + nums[j])] = hashVal{nums[j], false}
            } else if item := hashMap[nums[j]]; !item.injected {
                arr := []int{nums[i], item.num, nums[j]}
                hashMap[nums[j]] = hashVal{item.num, true}
                res = append(res, arr)
            }
        }
	  }
    return res
}
```

è§£æ³•ä¸‰ï¼š
```go
func threeSum(nums []int) [][]int {
    res := make([][]int, 0)
    sort.Ints(nums)
    for i := 0; i < len(nums) - 2; i++ {
        if nums[i] > 0 {
            break
        }
        if i > 0 && nums[i] == nums[i - 1] {
            continue
        }
        right := len(nums) - 1
        left := i + 1
        for left < right {
            if nums[left] + nums[right] + nums[i] == 0 {
                arr := []int{nums[i], nums[left], nums[right]}
                res = append(res, arr)
                for left++; (left < len(nums)) && (nums[left] == nums[left - 1]); left++ {}
                for right--; (right > i) && (nums[right] == nums[right + 1]); right-- {}
            } else if nums[left] + nums[right] + nums[i] > 0 {
                right--
            } else {
                left++
            }
        }
    }
    return res
}
```