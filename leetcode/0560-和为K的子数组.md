# 560. å’Œä¸ºKçš„å­æ•°ç»„
[åŸé¢˜é“¾æ¥ğŸ”—](https://leetcode-cn.com/problems/subarray-sum-equals-k/)

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` å’Œä¸€ä¸ªæ•´æ•° `k` ï¼Œè¯·ä½ ç»Ÿè®¡å¹¶è¿”å›è¯¥æ•°ç»„ä¸­å’Œä¸º `k` çš„è¿ç»­å­æ•°ç»„çš„ä¸ªæ•°ã€‚

## è§£é¢˜æ€è·¯
### å‰ç¼€æ³• + å“ˆå¸Œ
æœ€æœ´ç´ çš„æ€æƒ³ä¾æ—§æ˜¯åŒå±‚éå†æš´åŠ›æ±‚è§£ã€‚å¯ä»¥æ³¨æ„åˆ°è¿™æ˜¯ä¸€ä¸ªæ•°ç»„æ±‚å’Œé—®é¢˜ï¼Œæ•…è”æƒ³åˆ°ä½¿ç”¨å‰ç¼€æ±‚å’Œæ³•ã€‚

å…ˆåˆ©ç”¨å‰ç¼€æ±‚å’Œå¾—åˆ°æ±‚å’Œæ•°ç»„ `sum` åå†çœ‹è¿™é“é¢˜ï¼Œè¾ƒä¸ºç®€å•çš„åšæ³•æ˜¯ç»§ç»­åŒå±‚éå†ï¼Œé€šè¿‡ä¸¤ä¸¤ç›¸å‡çš„æ–¹å¼åˆ¤æ–­æ˜¯å¦å­˜åœ¨å­æ•°ç»„å’Œkå¹¶è®°å½•ã€‚

å¦‚æ­¤ä¸€æ¥å°±æˆäº†è´Ÿä¼˜åŒ–äº†ï¼Œæ—¶é—´å¤æ‚åº¦ä¸å˜ï¼Œç©ºé—´å¤æ‚åº¦åè€Œä» $O(1)$ å˜ä¸º $O(n)$ã€‚

ä½†å®é™…ä¸Šæˆ‘ä»¬è¦åœ¨ `sum` æ•°ç»„ä¸­æ‰¾çš„ä¸¤ä¸ªæ•°æ¡ä»¶æ˜¯ï¼š

$$ sum[j] - sum[i] = k $$

å³

$$ sum[j] = k + sum[i] $$

å› æ­¤å¯ä»¥æ„å»ºå“ˆå¸Œè¡¨ï¼Œé€šè¿‡ä¸€æ¬¡éå†ï¼Œè®°å½• `sum[i]` æ‰€å¯¹åº”çš„å€¼çš„åŒæ—¶ï¼Œä»å“ˆå¸Œè¡¨ä¸­æŸ¥è¯¢æ˜¯å¦å­˜åœ¨éœ€è¦ `sum[i]` çš„å€¼ã€‚

æ­¤æ€è·¯ç±»ä¼¼ [1. ä¸¤æ•°ä¹‹å’Œ](./0001-ä¸¤æ•°ä¹‹å’Œ.md)ï¼Œæœ¬é¢˜æ„å»ºé”®å€¼å¯¹ä¸º `(k + item): count`ã€‚

æœ‰æ‰€ä¸åŒçš„æ˜¯ï¼Œæœ¬é¢˜æ— éœ€è¿”å›æ•°ç»„ä¸­å…ƒç´ ï¼Œè€Œæ˜¯è¿”å›å­˜åœ¨ä¸ªæ•°ï¼Œä¸åŒä¸‹æ ‡çš„å…ƒç´ å¯ä»¥é‡å¤ä½¿ç”¨ã€‚å› æ­¤å“ˆå¸Œå€¼ä¸æ˜¯å…ƒç´ å€¼ `item` ï¼Œè€Œæ˜¯ç¬¦åˆè¯¥å€¼çš„æ•°ç»„ä¸ªæ•° `count`ã€‚

å¦‚ï¼š `[-1,1,2,-1,0,0,-1,0]ï¼Œk=0`

æ±‚å’Œæ•°ç»„ä¸º `sum = [-1,0,2,1,1,1,0,0]`

å¯¹äºæ±‚å’Œæ•°ç»„æœ«ä½å…ƒç´  `0` è€Œè¨€ï¼Œæ‰€éœ€å¯¹åº”å€¼ä¸º `0 + 0 = 0`ï¼Œè€Œå®ƒä¸ `sum[1]`ã€`sum[6]` å‡å¯æ„æˆç¬¦åˆæ¡ä»¶çš„å­æ•°ç»„ï¼Œå› æ­¤ç¬¦åˆæ¡ä»¶çš„å­æ•°ç»„æ€»æ•°åº”è¯¥åŠ  `2`ï¼Œæ„é€ çš„å“ˆå¸Œå€¼æ­¤æ—¶ä¸º `2` æœ€ä½³ã€‚

æ•…å“ˆå¸Œå€¼é€‰å–ä¸ºç¬¦åˆè¯¥å€¼çš„æ•°ç»„ä¸ªæ•°æ›´ä¸ºåˆç†ã€‚

åŒæ—¶æ³¨æ„åˆ°ï¼šæ­¤æ—¶ `sum` æ•°ç»„å¯¹åº”å€¼ä¸º `sum[j] - sum[i] = S(nums[i + 1], nums[i + 2], ..., nums[j])`ï¼Œæ±‚å’ŒèŒƒå›´ä¸º `(i, j]` å› æ­¤ `nums[0]` æ— æ³•è¢«å›Šæ‹¬å…¶ä¸­ã€‚

ä¸ºè§£å†³è¿™ä¸€é—®é¢˜ï¼Œåœ¨ `sum` é¦–ç«¯æ’å…¥å…ƒç´ 0å³å¯ï¼Œæ•… `sum` åº”ä¸º `sum = [0,,-1,0,2,1,1,1,0,0]`ï¼›æˆ–æ„å»ºå“ˆå¸Œè¡¨æ—¶é¢„å…ˆæ’å…¥ä¸€ä¸ª `{k: 1}` ç»“æ„ã€‚

æ›´è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œå°†æ±‚å’Œè¿‡ç¨‹ä¸å“ˆå¸ŒæŸ¥è¯¢ã€æ›´æ–°è¿‡ç¨‹ç»“åˆï¼Œä½¿ç”¨ä¸€ä¸ªå•å±‚forå¾ªç¯å³å¯ã€‚

## ä»£ç å®ç°

**JavaScriptï¼š**

å…ˆæ±‚å’Œå†å“ˆå¸Œï¼š
```js
/**
 * @param {number[]} nums
 * @param {number} k
 * @return {number}
 */
var subarraySum = function(nums, k) {
  let sum = [0], res = 0
  let hashMap = new Map()
  nums.map((item, index) => {
    sum.push(sum[index] + item)
  })

  sum.map(item => {
    if(hashMap.has(item)) {
      res = res + hashMap.get(item)
    }
    if(hashMap.has(item + k)) {
      hashMap.set(item + k, hashMap.get(item + k) + 1)
    } else {
      hashMap.set(item + k, 1)
    }
  })
  return res
};
```

åˆå¹¶æ±‚å’Œå“ˆå¸Œï¼š
```js
/**
 * @param {number[]} nums
 * @param {number} k
 * @return {number}
 */
var subarraySum = function(nums, k) {
  let sum = 0, res = 0
  let hashMap = new Map()
  hashMap.set(k, 1)

  nums.map(item => {
    sum += item
    if(hashMap.has(sum)) {
      res = res + hashMap.get(sum)
    }
    if(hashMap.has(sum + k)) {
      hashMap.set(sum + k, hashMap.get(sum + k) + 1)
    } else {
      hashMap.set(sum + k, 1)
    }
  })
  return res
};
```

**Go:**
```go
func subarraySum(nums []int, k int) int {
    sum, res := 0, 0
    hashMap := map[int]int{}
    hashMap[k] = 1

    for _, item := range nums {
        sum += item
        if val, ok := hashMap[sum]; ok {
            res += val
        }
        hashMap[sum + k]++
    }
    return res
}
```

## ç›¸å…³é¢˜ç›®
 - [303. åŒºåŸŸå’Œæ£€ç´¢](./0303-åŒºåŸŸå’Œæ£€ç´¢.md)
 - [304. äºŒç»´åŒºåŸŸå’Œæ£€ç´¢ - çŸ©é˜µä¸å¯å˜](./0304-äºŒç»´åŒºåŸŸå’Œæ£€ç´¢.md)
