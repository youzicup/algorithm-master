# 303. åŒºåŸŸå’Œæ£€ç´¢
[åŸé¢˜é“¾æ¥ğŸ”—](https://leetcode-cn.com/problems/range-sum-query-immutable/)  

ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums`ï¼Œæ±‚å‡ºæ•°ç»„ä»ç´¢å¼• `i åˆ° j`ï¼ˆi â‰¤ jï¼‰èŒƒå›´å†…å…ƒç´ çš„æ€»å’Œï¼ŒåŒ…å« iã€j ä¸¤ç‚¹ã€‚

å®ç° `NumArray` ç±»ï¼š

 - `NumArray(int[] nums)` ä½¿ç”¨æ•°ç»„ `nums` åˆå§‹åŒ–å¯¹è±¡
 - `int sumRange(int i, int j)` è¿”å›æ•°ç»„ `nums` ä»ç´¢å¼• i åˆ° jï¼ˆi â‰¤ jï¼‰èŒƒå›´å†…å…ƒç´ çš„æ€»å’Œï¼ŒåŒ…å« iã€j ä¸¤ç‚¹`ï¼ˆä¹Ÿå°±æ˜¯ sum(nums[i], nums[i + 1], ... , nums[j])ï¼‰`

## è§£é¢˜æ€è·¯
### è§£ä¸€ï¼šæš´åŠ›æ±‚è§£
è¿™é¢˜å¦™å•Šï¼é¦–å…ˆåœ¨åˆšçœ‹åˆ°è¿™é“é¢˜çš„æ—¶å€™ï¼Œå¾ˆå®¹æ˜“å°±ä¼šå†™å‡ºä¸€ä¸ªç®€å•çš„å¾ªç¯å‡½æ•°:
```
for (let i = left; i <= right && i < this.len; i++) {
    res += this.arr[i]
}
```
è¿™å°±æ˜¯æœ€ç›´æ¥ç®€å•çš„è§£æ³•ï¼Œä½†å­˜åœ¨ç¼ºé™·ï¼šç”±äºæ¯æ¬¡è°ƒç”¨ `sumRange` å‡½æ•°éƒ½éœ€è¦è¿›è¡Œä¸€æ¬¡æ—¶é—´å¤æ‚åº¦ $O(n)$ çš„è®¡ç®—ï¼Œå¯¼è‡´å¤šæ¬¡è°ƒç”¨æ—¶è€—æ—¶è¾ƒé•¿ï¼Œæ•ˆç‡ä¸é«˜ã€‚

æ­¤å¤„æˆ‘ä»¬æ„å»ºä¸“ç”¨çš„ `NumArray` ç»“æ„ï¼Œå®é™…ä¸Šå¯ä»¥å°†ä¿¡æ¯å­˜å‚¨å…¶ä¸­ï¼Œä¸“ç”¨äºè¯¥é—®é¢˜çš„æ±‚è§£ï¼Œäºæ˜¯å¾—åˆ°è§£æ³•äºŒã€‚

### è§£äºŒï¼šå‰ç¼€æ³•
åœ¨åˆå§‹åŒ–è¯¥ç»“æ„çš„æ—¶å€™ç›´æ¥è¿›è¡Œä¸€æ¬¡éå†ï¼Œå¾—åˆ°æ¯ä¸€ä½å¯¹åº”çš„å…ƒç´ å’Œï¼Œå³

$$ sum_i = nums_0 + nums_1 + ... + nums_i $$

éšååœ¨ `sumRange` å‡½æ•°ä¸­è¿›è¡Œè¿ç®—ï¼š

$$ res = sum_{right} - sum_{left - 1} $$

å³å¯å¾—åˆ°ä¸€ä¸ªåŒºé—´ç»“æœï¼Œ `sumRange` å‡½æ•°å¤æ‚åº¦é™ä½ä¸º $ O(1) $ï¼Œåªéœ€å¯¹ `left` åšè¾¹ç•Œåˆ¤æ–­å³å¯ã€‚

## ä»£ç å®ç°

**JavaScriptï¼š**

è§£æ³•ä¸€ï¼š
```js
/**
 * @param {number[]} nums
 */
var NumArray = function(nums) {
  this.arr = nums
  this.len = nums.length
};

/** 
 * @param {number} left 
 * @param {number} right
 * @return {number}
 */
NumArray.prototype.sumRange = function(left, right) {
  let res = 0
  for (let i = left; i <= right && i < this.len; i++) {
    res += this.arr[i]
  }
  return res
};
```

è§£æ³•äºŒï¼šå‰ç¼€æ³•
```js
/**
 * @param {number[]} nums
 */
var NumArray = function(nums) {
  let count = 0
  this.sum = nums.map(item => {
    count += item
    return count
  })
};

/** 
 * @param {number} left 
 * @param {number} right
 * @return {number}
 */
NumArray.prototype.sumRange = function(left, right) {
  if(left === 0) return this.sum[right]
  return this.sum[right] - this.sum[left - 1]
};
```

**Go:**

è§£æ³•äºŒï¼šå‰ç¼€æ³•
```go
type NumArray struct {
    sum []int
}

func Constructor(nums []int) NumArray {
    sum := make([]int, len(nums) + 1)
    for index, val := range nums {
        sum[index + 1] = sum[index] + val
    }
    return NumArray{sum}
}

func (this *NumArray) SumRange(left int, right int) int {
    return this.sum[right + 1] - this.sum[left]
}

/**
 * Your NumArray object will be instantiated and called as such:
 * obj := Constructor(nums);
 * param_1 := obj.SumRange(left,right);
 */
```

## ç›¸å…³é¢˜ç›®
 - [304. äºŒç»´åŒºåŸŸå’Œæ£€ç´¢ - çŸ©é˜µä¸å¯å˜](./0304-äºŒç»´åŒºåŸŸå’Œæ£€ç´¢.md)
 - [560. å’Œä¸ºKçš„å­æ•°ç»„](./0560-å’Œä¸ºKçš„å­æ•°ç»„.md)
